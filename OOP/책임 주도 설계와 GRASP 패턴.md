## 책임 주도 설계를 향해
책임 주도 설계를 위해서는 두가지 원칙을 따라야한다.

### 데이터보다 행동을 먼저 결정하라
데이터 중심 설계를 하게되면 제일먼저 고민하는 것은 이 객체에는 어떤 데이터가 필요한지이다.
그리고 데이터가 결정되면, 이 데이터를 사용하여 어떤 오퍼레이션을 제공할 것인지를 결정한다.

하지만, 데이터 중심의 설계는 데이터에 무게중심이 있기 때문에, 협력을 고려하지 않고 설계를 진행한다.
그 설계는 결국 캡슐화를 어렵게하며, 낮은 응집도와 높은 결합도를 가진 객체를 만들게 된다.

책임 주도 설계를 위해서는 데이터보다 행동을 먼저 결정해야한다.
즉, 이 객체와 상호작용(협력) 할 대상이 이 객체의 어떤 행동을 필요로 하는지의 관점을 생각해보라는 것이다.

이렇게 이해하고보니 책임 주도 설계는 나를 위한이 아닌 누군가를 위한 의 느낌이 드는 듯 하다.

책임 주도 설계에서의 행동을 먼저 결정하는 행위는, 이 객체가 수행해야하는 책임은 무엇인가를 먼저 결정하고,
그 책임에 필요한 데이터를 그다음에 결정하는 것이다.

다시말해, 책임 중심의 설계는 객체의 행동을 먼저 결정하고, 객체의 상태를 그 다음에 결정하는 것이다.

### 협력이라는 문맥 안에서 책임을 결정하라
기존 클래스 기반 설계는 클래스를 먼저 만들고 이 클래스는 무엇을 해야할지를 질문한다.
하지만, 책임 주도 설계는 클래스 기반으로 생각하지 않고 협력을 고려하여, 객체가 협력을 위해 메시지를 전송할 때
누구에게 메시지를 전송할 것인지로 시작하는 것이다.

즉, 협력에 적합한 책임을 얻기 위해, 객체를 결정한 뒤, 메시지를 선택하는 것이 아니라,
메시지를 결정한 후에 객체를 선택해야한다는 의미이다.

---

## 책임 할당을 위한 GRASP 패턴
크레이그 라만(Craig Larman)에 패턴 형식으로 제안한 GRASP 패턴은 General Responsibility Assignment Software Pattern(일반적인 책임 할당을 위한 소프트웨어 패턴)의 약자로
객체에게 책임을 할당할 때 지침으로 삼을 수 잇는 원칙들의 집합을 패턴 형식으로 정리한 것이다.

### 도메인 개념에서 출발하기
어떤 책임을 할당해야 할 때 가장 먼저 고민해야 하는 유력한 후보는 바로 도메인 개념이다.
도메인을 초기 설게할 때는 완벽하게 설계될 필요는 없다.
다만, 책임을 할당받을 객체들의 종류와 관계에 대한 유용한 정보를 제공할 수 있다면 충분하다.

### 정보 전문가에게 책임을 할당하라
책임 주도 설계 방식의 첫 단계는 애플리케이션이 제공해야 하는 기능을 애플리케이션의 책임으로 생각하는 것이다.
이 책임을 애플리케이션에 대해 전송된 메시지로 간준하고 이 메시지를 책임질 첫 번째 객체를 선택하는 것으로 설계를 시작한다.

1. 메시지를 전송할 객체는 무엇을 원하는가?

-1:예매하라->

2. 메시지를 수신할 적합한 객체는 누구인가?

이 질문에 답하기 위해서는 객체가 상태와 행동을 통합한 캡슐화의 단위라는 사실에 집중해야 한다.
객체는 자신의 상태를 스스로 처리하는 자율적인 존재여야 한다.

객체에게 책임을 할당하는 첫 번째 원칙은 책임을 수행할 정보를 알고 있는 객체에게 책임을 할당하는 것이다.
GRASP에서는 이를 INFORMATION EXPERT(정보 전문가) 패턴이라고 부른다.

> 책임을 정보 전문가 즉, 책임을 수행하는데에 필요한 정보를 가지고 있는 객체엑 할당하라.

> -1:예매하라-> :Screening

여기서 Screening(상영)에서 예매하라를 곧바로 처리할 수 없다면 외부에 도움을 요청해야 한다.
예매하라 메시지를 완료하기 위해서는 Screening 혼자 처리할 수는 없다. 
가격을 Screening이 직접 계산할 수는 없기 때문이다.

> --1:예매하라--> :Screening --2:가격을 계산하라--> 

가격을 계산하는데 필요한 정보를 알고 있는정보 전문가에게 또다시 요청을 해야한다.

> --1:예매하라--> :Screening --2:가격을 계산하라--> :Movie

Movie는 영화 가격을 계산할 책임을 지게된다.

그다음으로 Movie가 영화 가격을 계산하기 위해서는 할인이 간으한지를 판단 후, 할인 정책을 적용하여 할인된 금액을 계산하면 된다.
하지만, Movie 스스로는 할인조건에 따른 영화 할인 가능 여부를 직접 판단할 수 없기 때문에, 할인 여부를 판단하라는 메시지를
전송해야하고, 이 외부의 도움을 통해 할인 가능 여부를 판단해야한다.

>--1:예매하라--> :Screening --2:가격을 계산하라--> :Movie --3:할인 여부를 판단하라-->:Discount Condition

DiscountCondition은 자체적으로 할인 여부를 판단하는 데 필요한 모든 정보를 알고 있기 떄문에 외부의 도움이 필요가 없다.
이를 토대로 역순으로 반환하여 최종 예매 및 예매에 필요한 금액을 결과로 얻을 수 있다.

지금까지 살펴본 것처럼 INFORMATION EXPERT 패턴은 객체에게 책임을 할당할 때 가장 기본이 되는 책임 할당 원칙이다.
객체란 상태와 행동을 함께 가지는 단위라는 객체지향의 가장 기본적인 원리를 책임 할당의 관점에서 표현한다.

INFORMATION EXPERT 패턴을 따르는 것만으로도 자율성이 높은 객체들로 구성된 협력 공동체를 구축할 가능성이 높아지는 것이다.

