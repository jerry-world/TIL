# Conventional Commits

## 개요

Conventional Commits는 커밋 메시지에 대한 컨벤션입니다.

컨벤션이 정의가 되면 메시지를 한눈에 보기도 좋을 뿐더러, 더 나아가서는 메시지 정형화 덕에 자동화 도구도 만들 수 있는 아주 중요한 문화입니다.

사실 이 Conventional Commits를 팀에 도입하게 된 계기는 Release Notes 작성의 자동화에 있었습니다. 정형화된 commit 메시지가 어느정도 쌓였다면, 이를 파싱해서 적절히 릴리즈 노트를 자동화할 수 있겠다고 생각했죠. 물론 이를 이미 도와주는 플러그인들도 존재합니다.(이를테면, fastlane ; 공식문서를 참고하면 더 많은 플러그인을 경험할 수 있습니다.)

## 구조

Conventional Commit 메시지 구조는 상당히 간단합니다.

```bash
<타입>[적용 범위]: <설명>
[본문]

[꼬리말]
```

타입에는 이번 Commit이 어떤 유형의 Commit인지를 작성해요. 버그인지 추가개발인지 등을 의미하죠.

### **타입**

**([앵귤러 컨벤션](https://github.com/conventional-changelog/commitlint/tree/master/%40commitlint/config-conventional))**

타입 종류는 아래처럼 굉장히 다양하지만, 실제로 사용하는 항목은 그리 많지 않은 것 같아요.

보편적으로 fix나 feat, 그리고 chore, refactor 정도를 사용해왔던 것 같아요. 필요에 따라서 모두 적극적으로 써보도록 하세요!

```
Angular Convention
build: 시스템 또는 외부 종속성에 영향을 미치는 변경사항 (npm, gulp, yarn 레벨)
ci: ci구성파일 및 스크립트 변경
chore: 패키지 매니저 설정할 경우, 코드 수정 없이 설정을 변경
docs: documentation 변경
feat: 새로운 기능
fix: 버그 수정
perf: 성능 개선
refactor: 버그를 수정하거나 기능을 추가하지 않는 코드 변경, 리팩토링
style: 코드 의미에 영향을 주지 않는 변경사항 ( white space, formatting, colons )
test: 누락된 테스트 추가 또는 기존 테스트 수정
revert: 작업 되돌리기
```

### **적용 범위(Optional)**

해당 타입과 설명이 어느 범위에 적용되었는지를 작성해요.

예를들어 A서비스 부분과 연관성이 깊다한다면 A라고 작성하면 되는 것이지요.

- fix[A]: 삽입 SQL 수정

만약 위와같이 메시지를 작성했다면? A라는 서비스에서 삽입 SQL이 문제가 있어 수정했다고 직관적으로 알 수 있는거에요.

### **설명**

커밋에서의 변경점이 무엇인지를 짧게 요약해서 작성하는거에요.

때문에 해당 메시지는 굉장히 직관적이어야하고, 짧은 문장만으로 어떤 작업을 수행했는지 대략적인 그림이 그려져야하죠.

설명 메시지의 잘못된 예시는

- “sql 수정”
- “버그 픽스”
- “버전 업”
- “리팩토링 수행”

등 주체가 명확하지 않는 경우가 대부분이에요.

sql을 수정하더라도 정확히 어떤 대상의 sql을 왜 수정했는지가 함께 담겨있으면 좋겠죠.

**“컬럼명 수정으로 인한 A서비스의 조회 SQL 수정”** 등으로 변경하는게 좋겠어요.

다른 내용들도 마찬가지입니다.

### **본문(Optional)**

물론 저 짧은 요약형태의 설명만 가지고는 내용을 이해할 수 없는 경우도 있어요. 또한, 한 커밋에 부득이하게 많은 양의 수정사항이 있어 한줄로 담을 수 없는 경우도 있죠. 그럴때는 본문을 추가 작성합니다.

이를테면, 꽤 큰기능을 개발했고 그 개발된 행위가 1 commit에 담겨있다면 조금은 풀어서 쓸 필요가 있는거죠. 한번 예시를 들어보겠습니다.

feat: 자유 게시판 개발

- Mapper 및 SQL 작성

- Controller CRUD 작성

- DTO, Entitty 작성

- 서비스 구현체 작성

자유 게시판 개발인데, 어느 범위까지 개발되어있는지가 묘사되지 않았어요. 왜냐면 진짜 자유 게시판 전체를 개발한 커밋이여서에요.(물론 예시가 좀 부적합하긴합니다... 나눠서 커밋했겠죠 저런 작업이라면..)

자유 게시판을 개발하면서 수행했었던 전체적인 맥락을 보기쉽게 작성했어요.본문은 이처럼 설명란만 가지고는 설명할 수 없는 수준의 크기일 때 사용합니다.

### **꼬리말**

꼬리말에는 레퍼런스가 되는 커밋을 작성하거나, BREAKING CHANGES()를 작성할 때 사용되어집니다.

우리 팀에서는 사용하고 있지 않아요. 작성할때는 반드시 본문과 꼬리말 사이 빈행을 작성하여 꼬리말을 구분해주어야 합니다.

## Cloudit 커밋 규칙

### 규칙

```bash
<유형>:␣<설명>
␣␣-␣본문1
␣␣-␣본문2
```

- 유형과 콜론은 붙혀 사용합니다.
- 설명을 작성하기 이전 공백을 추가합니다.
- 본문작성전 공백2개와 대시 그리고 공백1개를 추가한 뒤 본문내용을 작성합니다.
- 불필요한 빈행은 작성하지 않습니다.
- 설명은 반드시 주체와 행위를 명확하게 작성합니다.
- 적용범위 및 꼬리말은 생략합니다.

### **커밋 예시**

```bash
fix: 볼륨 생성시 ‘size’파라미터 전달 오류 수정
```

```bash
feat: 볼륨 생성 비즈니스 로직 개발
  - VolumeDriver인터페이스 기반 KVMVolumeDriver 구현체 내 생성 구현
```

```bash
feat: 볼륨 관련 SQL 일괄 작성
  - 생성 1건
  - 삭제 1건
  - 업데이트 2건(볼륨 크기변경, 메타 수정)
  - 조회 2건(리스트 조회, 단일 상세 조회)
```

> 💡 끝으로, 컨벤션을 주의하여 항상 직관적이고 명확한 커밋 메시지 작성 문화를 만듭시다.
