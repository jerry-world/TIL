# 상속(Inheritance)와 구성(Composition)

상속은 하위클래스가 상위클래스의 모든 메서드를 재사용할 수 있고, 재정의하여 하위 클래스 만은 독자적인 메서드 구현도 가능하다.

상속은 알다시피 아래와 같은 장점을 가지고있다.

- 코드를 재사용하여 코드 중복을 줄일 수 있다.
- 확장성이 용이해진다.
- 모듈화를 통해, 재사용이 가능해진다.
- 즉, 유지보수 성이 좋다.

반대로 단점도 존재한다.

- 상속을 사용하게 되면, 하위 클래스는 상위 클래스의 부분 집합이기 때문에, 기능 추가/변경 시에 예외나 버그가 발생하게 되었을 때, `어디에서 발생한지 예측하기가 어려운` 부분이 있다.
- 만약 상속구조가 복잡해진다면 예측은 더욱이 어려워진다.
- 또한, 상위 클래스를 상속 받은 하위클래스는 상위 클래스에서 사용하지 않는 메서드들도 `강제로 상속`받아야한다.
- 그리고 캡슐화를 깨뜨린다는 가장 큰 문제점을 가지고 있다. 만약 `추상클래스에서 형태를 조금만 바꾸더라도 하위클래스는 그형태에 맞춰 모두 수정`되어야한다. 결국에 강한 의존 및 결합도로 인해 변화에 `유연하게 대처할 수 없는 문제`가 발생하는 것이다.

결국 공통적인 부분을 묶어 코드 재사용성이나 유지보수성을 늘리는 목적으로 시작하지만, 상속 구조가 복잡해짐에 따라, 오히려 사용하기 더 어려운 상황이 나올 수도 있게된다.

때문에, 상속은 상위와 하위 클래스의 관계과 명확히 `is-a`관계에 있는 경우에 사용하는 것이 좋다.

그치만 is-a 관계에 있다할지라도 확장을 고려하지 않는 경우에는 또 문제가 발생할 수 있다…

그러면 상속의 이런 문제점을 해결할 수 있는 방법에는 무엇이 있을까?

그 방법으로는 `조합(Composition)`이라는 방법을 사용하여 대처할 수 있다.

<aside>
💡 조합은 기존 클래스가 새로운 클래스의 구성 요소로 쓰인다. 새로운 클래스를 만들고 그 클래스의 private 필드로 기존 클래스의 인스턴스를 참조하는 방법이다.

</aside>

위의 내용처럼 조합이라는 방법은 기존 클래스가 새로운 클래스의 `구성 요소` 로 사용되는 방법이다.

조합을 사용하게 되면, 

- 메서드를 호출하는 방식으로 기존 클래스를 사용하기 때문에 캡슐화가 깨질 염려도 없으며,
- 기존 클래스 객체의 퍼블릭 인터페이스에만 의존하기 때문에 `느슨한 결합`이 가능하다.
- 또한, 컴파일 타임에 관계를 갖는 상속 구조를 런타임에 관계를 가지도록 하기 때문에, `유동적으로 관계 대상을 정의`할 수 있으며,
- 테스트에 용이한 성격을 지닌다.(Mock 객체로 만들 수 있음)
- 또한, 다중 상속이 불가한 자바언어에서 `다중 상속과 같은 형태`를 만들 수 있다.

이 조합은 디자인 패턴에서도 여러 패턴에서 다양하게 활용된다.(예를 들면, 프록시 패턴, 데코레이터 패턴..)